<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>My Dashboard ‚Äî FootballBettingBuddi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root { color-scheme: dark; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:#0b0b12; color:#e8e6ff; }
    header { padding:20px; background:linear-gradient(90deg,#0b0b12,#1a1030 50%,#241245); border-bottom:1px solid #2a2151; }
    h1 { margin:0; font-size:22px; letter-spacing:0.3px; }
    h2 { font-size:18px; margin:24px 0 12px; opacity:0.9; }
    #status { font-size:12px; opacity:0.8; margin-top:6px; }
    main { padding:20px; max-width: 1200px; margin: 0 auto; }
    
    /* Navigation */
    nav { display:flex; gap:12px; margin-top:16px; }
    nav a { 
      padding:8px 16px; border-radius:8px; background:#1a1030; 
      border:1px solid #2a2151; color:#e8e6ff; text-decoration:none; 
      font-size:14px; transition: all 0.2s;
    }
    nav a:hover { background:#241245; border-color:#5a4a9f; }
    nav a.active { background:#5a4a9f; border-color:#7a6abf; }
    
    /* Summary Cards */
    .summary-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:12px; margin-bottom:24px; }
    .kpi { background:#141426; border:1px solid #2a2151; border-radius:12px; padding:16px; text-align:center; }
    .kpi .label { font-size:11px; opacity:0.75; text-transform:uppercase; letter-spacing:0.5px; }
    .kpi .value { font-size:28px; font-weight:700; margin-top:8px; }
    .kpi .value.green { color:#2a914a; }
    .kpi .value.yellow { color:#a5972a; }
    .kpi .value.red { color:#b54949; }
    .kpi .subtext { font-size:12px; opacity:0.7; margin-top:6px; }
    
    /* Filters */
    .filters { background:#141426; border:1px solid #2a2151; border-radius:14px; padding:16px; margin-bottom:20px; }
    .filter-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:12px; }
    .filter-group { display:flex; flex-direction:column; gap:6px; }
    .filter-group label { font-size:12px; opacity:0.8; font-weight:600; }
    .filter-group select { 
      background:#0b0b12; border:1px solid #2a2151; border-radius:8px; 
      padding:8px 12px; color:#e8e6ff; font-size:14px;
    }
    .filter-group select:focus { outline:none; border-color:#5a4a9f; }
    
    /* Bet Cards */
    .card { background:#141426; border:1px solid #2a2151; border-radius:14px; padding:18px; margin-bottom:14px; transition: all 0.2s; position:relative; }
    .card:hover { border-color:#5a4a9f; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(90,74,159,0.2); }
    .card-header { display:flex; justify-content:space-between; align-items:flex-start; margin-bottom:12px; }
    .match-info { flex:1; }
    .teams { font-size:16px; font-weight:600; margin-bottom:6px; }
    .league-badge { display:inline-flex; align-items:center; gap:6px; font-size:12px; opacity:0.8; }
    .kickoff { font-size:12px; opacity:0.7; margin-top:4px; }
    
    .status-badge { 
      padding:6px 12px; border-radius:999px; font-size:12px; font-weight:600;
      display:inline-flex; align-items:center; gap:6px;
    }
    .status-badge.pending { background:#322d10; border:1px solid #a5972a; color:#a5972a; }
    .status-badge.won { background:#11311f; border:1px solid #2a914a; color:#2a914a; }
    .status-badge.lost { background:#381313; border:1px solid #b54949; color:#b54949; }
    .status-badge.void { background:#1a1a2e; border:1px solid #4a4a6a; color:#8a8aaa; }
    
    .bet-details { display:grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap:12px; margin:12px 0; }
    .detail-item { background:#0b0b12; border:1px solid #2a2151; border-radius:8px; padding:10px; }
    .detail-label { font-size:11px; opacity:0.7; text-transform:uppercase; letter-spacing:0.5px; }
    .detail-value { font-size:16px; font-weight:600; margin-top:4px; }
    
    .card-footer { display:flex; justify-content:space-between; align-items:center; margin-top:12px; padding-top:12px; border-top:1px solid #2a2151; }
    .added-date { font-size:11px; opacity:0.6; }
    
    .btn-remove { 
      padding:6px 12px; border-radius:6px; background:#381313; 
      border:1px solid #b54949; color:#b54949; cursor:pointer; 
      font-size:12px; font-weight:600; transition: all 0.2s;
    }
    .btn-remove:hover { background:#4a1a1a; transform: scale(1.05); }
    
    .empty-state { text-align:center; padding:80px 20px; opacity:0.6; }
    .empty-state svg { width:100px; height:100px; opacity:0.3; margin-bottom:20px; }
    .empty-state h3 { font-size:20px; margin-bottom:12px; }
    .empty-state p { font-size:14px; margin-bottom:24px; }
    .empty-state a { 
      display:inline-block; padding:10px 20px; border-radius:8px; 
      background:#5a4a9f; border:1px solid #7a6abf; color:#fff; 
      text-decoration:none; font-weight:600; transition: all 0.2s;
    }
    .empty-state a:hover { background:#7a6abf; transform: scale(1.05); }
    
    .muted { opacity:0.7; }
  </style>
</head>
<body>
  <header>
    <h1>üìä My Dashboard ‚Äî FootballBettingBuddi</h1>
    <nav>
      <a href="/">Smart Bets</a>
      <a href="/dashboard.html" class="active">My Dashboard</a>
      <a href="/fixtures.html">Fixtures</a>
    </nav>
    <div id="status" class="muted">Loading your saved bets...</div>
  </header>

  <main>
    <!-- Summary KPIs -->
    <div class="summary-grid">
      <div class="kpi">
        <div class="label">Total Bets</div>
        <div class="value" id="total-bets">0</div>
      </div>
      <div class="kpi">
        <div class="label">Pending</div>
        <div class="value yellow" id="pending-bets">0</div>
      </div>
      <div class="kpi">
        <div class="label">Won</div>
        <div class="value green" id="won-bets">0</div>
      </div>
      <div class="kpi">
        <div class="label">Lost</div>
        <div class="value red" id="lost-bets">0</div>
      </div>
      <div class="kpi">
        <div class="label">Win Rate</div>
        <div class="value" id="win-rate">0%</div>
        <div class="subtext">of settled bets</div>
      </div>
      <div class="kpi">
        <div class="label">Total P/L</div>
        <div class="value" id="total-pl">¬£0.00</div>
        <div class="subtext">ROI: <span id="roi">0%</span></div>
      </div>
    </div>

    <!-- Filters -->
    <div class="filters">
      <div class="filter-grid">
        <div class="filter-group">
          <label>Status</label>
          <select id="filter-status">
            <option value="all">All Bets</option>
            <option value="pending">Pending</option>
            <option value="won">Won</option>
            <option value="lost">Lost</option>
            <option value="void">Void</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Market</label>
          <select id="filter-market">
            <option value="all">All Markets</option>
            <option value="Over/Under">Over/Under</option>
            <option value="BTTS">BTTS</option>
            <option value="1X2">1X2</option>
            <option value="Asian Handicap">Asian Handicap</option>
            <option value="Double Chance">Double Chance</option>
          </select>
        </div>
        <div class="filter-group">
          <label>Sort By</label>
          <select id="sort-by">
            <option value="date-desc">Newest First</option>
            <option value="date-asc">Oldest First</option>
            <option value="odds-desc">Highest Odds</option>
            <option value="odds-asc">Lowest Odds</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Saved Bets List -->
    <h2>üìã My Saved Bets</h2>
    <div id="bets-container"></div>
  </main>

  <script>
    // LocalStorage key
    const STORAGE_KEY = 'fbb_saved_bets';

    // Load saved bets from localStorage
    function loadSavedBets() {
      const stored = localStorage.getItem(STORAGE_KEY);
      return stored ? JSON.parse(stored) : [];
    }

    // Save bets to localStorage
    function saveBets(bets) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(bets));
    }

    // Remove a bet
    function removeBet(betId) {
      const bets = loadSavedBets();
      const filtered = bets.filter(b => b.id !== betId);
      saveBets(filtered);
      renderDashboard();
    }

    // Calculate summary stats
    function calculateStats(bets) {
      const total = bets.length;
      const pending = bets.filter(b => b.status === 'pending').length;
      const won = bets.filter(b => b.status === 'won').length;
      const lost = bets.filter(b => b.status === 'lost').length;
      const settled = won + lost;
      const winRate = settled > 0 ? ((won / settled) * 100).toFixed(1) : 0;
      
      // Calculate P/L (assuming ¬£10 stake per bet for demo)
      const stake = 10;
      let totalPL = 0;
      bets.forEach(bet => {
        if (bet.status === 'won') {
          totalPL += (bet.odds - 1) * stake;
        } else if (bet.status === 'lost') {
          totalPL -= stake;
        }
      });
      
      const totalStaked = settled * stake;
      const roi = totalStaked > 0 ? ((totalPL / totalStaked) * 100).toFixed(1) : 0;
      
      return { total, pending, won, lost, winRate, totalPL, roi };
    }

    // Render summary KPIs
    function renderSummary(stats) {
      document.getElementById('total-bets').textContent = stats.total;
      document.getElementById('pending-bets').textContent = stats.pending;
      document.getElementById('won-bets').textContent = stats.won;
      document.getElementById('lost-bets').textContent = stats.lost;
      document.getElementById('win-rate').textContent = `${stats.winRate}%`;
      
      const plEl = document.getElementById('total-pl');
      plEl.textContent = `¬£${stats.totalPL.toFixed(2)}`;
      plEl.className = 'value ' + (stats.totalPL > 0 ? 'green' : stats.totalPL < 0 ? 'red' : '');
      
      const roiEl = document.getElementById('roi');
      roiEl.textContent = `${stats.roi}%`;
      roiEl.style.color = stats.roi > 0 ? '#2a914a' : stats.roi < 0 ? '#b54949' : '';
    }

    // Render bet card
    function renderBetCard(bet) {
      const statusEmoji = {
        pending: '‚è≥',
        won: '‚úÖ',
        lost: '‚ùå',
        void: '‚ö™'
      };

      return `
        <div class="card">
          <div class="card-header">
            <div class="match-info">
              <div class="teams">${bet.homeTeam} vs ${bet.awayTeam}</div>
              <div class="league-badge">üèÜ ${bet.league}</div>
              <div class="kickoff">‚è∞ ${new Date(bet.kickoff).toLocaleString('en-GB', { 
                weekday: 'short', day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' 
              })}</div>
            </div>
            <span class="status-badge ${bet.status}">
              ${statusEmoji[bet.status]} ${bet.status.toUpperCase()}
            </span>
          </div>

          <div class="bet-details">
            <div class="detail-item">
              <div class="detail-label">Market</div>
              <div class="detail-value">${bet.market}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Selection</div>
              <div class="detail-value">${bet.selection}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Odds</div>
              <div class="detail-value">${bet.odds.toFixed(2)}</div>
            </div>
            <div class="detail-item">
              <div class="detail-label">Probability</div>
              <div class="detail-value">${(bet.probability * 100).toFixed(1)}%</div>
            </div>
          </div>

          <div class="card-footer">
            <span class="added-date">Added: ${new Date(bet.addedAt).toLocaleDateString('en-GB')}</span>
            <button class="btn-remove" onclick="removeBet('${bet.id}')">üóëÔ∏è Remove</button>
          </div>
        </div>
      `;
    }

    // Apply filters and sorting
    function filterAndSortBets(bets) {
      const statusFilter = document.getElementById('filter-status').value;
      const marketFilter = document.getElementById('filter-market').value;
      const sortBy = document.getElementById('sort-by').value;

      // Filter
      let filtered = bets;
      if (statusFilter !== 'all') {
        filtered = filtered.filter(b => b.status === statusFilter);
      }
      if (marketFilter !== 'all') {
        filtered = filtered.filter(b => b.market === marketFilter);
      }

      // Sort
      filtered.sort((a, b) => {
        switch(sortBy) {
          case 'date-desc': return new Date(b.addedAt) - new Date(a.addedAt);
          case 'date-asc': return new Date(a.addedAt) - new Date(b.addedAt);
          case 'odds-desc': return b.odds - a.odds;
          case 'odds-asc': return a.odds - b.odds;
          default: return 0;
        }
      });

      return filtered;
    }

    // Render dashboard
    function renderDashboard() {
      const allBets = loadSavedBets();
      const stats = calculateStats(allBets);
      renderSummary(stats);

      const filteredBets = filterAndSortBets(allBets);
      const container = document.getElementById('bets-container');

      if (filteredBets.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 11l3 3L22 4"></path>
              <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"></path>
            </svg>
            <h3>${allBets.length === 0 ? 'No Saved Bets Yet' : 'No Bets Match Filters'}</h3>
            <p>${allBets.length === 0 ? 'Start adding bets from the Smart Bets page to track them here.' : 'Try adjusting your filters to see more bets.'}</p>
            ${allBets.length === 0 ? '<a href="/">Browse Smart Bets</a>' : ''}
          </div>
        `;
      } else {
        container.innerHTML = filteredBets.map(renderBetCard).join('');
      }

      document.getElementById('status').textContent = `${filteredBets.length} bet${filteredBets.length !== 1 ? 's' : ''} displayed`;
    }

    // Event listeners
    document.getElementById('filter-status').addEventListener('change', renderDashboard);
    document.getElementById('filter-market').addEventListener('change', renderDashboard);
    document.getElementById('sort-by').addEventListener('change', renderDashboard);

    // Initial render
    renderDashboard();
  </script>
</body>
</html>
